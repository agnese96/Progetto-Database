<div layout="column" layout-fill layout-margin layout-padding>
  <div layout="row" layout-fill layout-margin layout-padding>
    <h3 class="md-display-1 editable" ng-model="Show.Event.Titolo" contenteditable="false"></h3>
    <span flex></span>
    <md-button class="md-icon-button" ng-click="Show.Edit()" ng-show="Show.owner && !Show.editmode">
      <md-icon>&#xE254;</md-icon>
    </md-button>
    <md-button class="md-icon-button" ng-click="Show.Delete()" ng-show="Show.owner && !Show.editmode">
      <md-icon>&#xE872;</md-icon>
    </md-button>
    <md-button class="md-icon-button" ng-click="Show.Cancel()" ng-show="Show.editmode">
      <md-icon>&#xE5CD;</md-icon>
    </md-button>
    <md-button class="md-icon-button" ng-click="Show.Apply()" ng-show="Show.editmode">
      <md-icon>&#xE876;</md-icon>
    </md-button>
    <md-button class="md-icon-button" ng-click="Show.Vote('Y')"  ng-show="!Show.owner">
      <md-icon ng-class="{'chosen-response': Show.Response.Yes }">&#xE8DC;</md-icon>
    </md-button>
    <md-button class="md-icon-button" ng-click="Show.Vote('M')"  ng-show="!Show.owner">
      <md-icon ng-class="{'chosen-response': Show.Response.Maybe }">&#xE8DD;</md-icon>
    </md-button>
    <md-button class="md-icon-button" ng-click="Show.Vote('N')"   ng-show="!Show.owner">
      <md-icon ng-class="{'chosen-response': Show.Response.No }" >&#xE8DB;</md-icon>
    </md-button>
  </div>
  <div class="descrizione editable" ng-model="Show.Event.Descrizione" contenteditable="false">
    {{Show.Event.Descrizione}}
  </div>
  <div class="Ora">
    Inizio:
    <span class="editable" ng-model="Show.Event.DataInizio" contenteditable="false"></span>
    <span class="editable" ng-model="Show.Event.OraInizio" contenteditable="false"></span>
    <br />Fine:
    <span class="editable" contenteditable="false" ng-model="Show.Event.DataFine" ng-show='Show.Event.DataInizio!=Show.Event.DataFine || Show.editmode'></span>
    <span class="editable" contenteditable="false" ng-model="Show.Event.OraFine"></span>
  </div>
  <div class="Categoria" >
    Categoria: <span class="editable" contenteditable="false" ng-model="Show.Event.NomeCategoria"></span>
  </div>
  <md-chips flex class="md-contact-chips" ng-model="Show.Event.Partecipanti" md-require-match="true" md-autocomplete-snap md-on-add="Show.addPartecipant($chip)" md-on-remove="Show.rmvPartecipant($chip)" readonly="!Show.editmode">
      <md-autocomplete md-menu-class="md-contact-chips-suggestions" md-selected-item="Show.selectedItem" md-search-text="Show.searchText"
      md-items="item in Show.Contatti | filter: {name: Show.searchText}" md-no-cache="true"
      md-autoselect="true" placeholder="Invita i tuoi conttati">
          <div class="md-contact-suggestion">
              <img ng-src="{{item.FotoProfilo}}" alt="{{item.Nominativo}}" ng-if="item.FotoProfilo" />
              <span class="md-contact-name">{{item.Nominativo}}</span>
              <span class="md-contact-email">{{item.Email}}</span>
          </div>
          <md-not-found>
            Nessun contatto corrispondente alla tua ricerca
            <a ng-click="Show.newContact(Show.searchText)">Crealo ora</a>
          </md-not-found>
      </md-autocomplete>
      <md-chip-template>
          <div class="md-contact-avatar">
              <img ng-src="{{$chip.FotoProfilo}}" alt="{{$chip.Nominativo}}" ng-if="$chip.FotoProfilo" />
          </div>
          <div class="md-contact-name">
              {{$chip.Nominativo}}
          </div>
      </md-chip-template>
  </md-chips>
</div>
